Question:8 Configure autofs (service)
Configure autofs to automatically mount remote users' home directories as follows:

materials.example.com ( 172.25.254.254 ) NFS exports /rhome to your system. This file system contains a preconfigured home directory for - user remoteuser1

remoteuser1's home directory is materials.example.com:/rhome/remoteuser1

The home directory of remoteuser1 should be automatically mounted to /rhome/remoteuser1 under the local /rhome

The home directory must be writable by its user

The password for remoteuser1 is password

Answer:8 Configure autofs (service)
1. Find the main configuration file
[root@node1 ~]# rpm -qc autofs
/etc/auto.master # absolute path configuration file
/etc/auto.misc # relative path configuration file

2. Configure the main configuration file
[root@node1 ~]# vim /etc/auto.master
/misc /etc/auto.misc
/rhome /etc/auto.rhome #relative path configuration file

3. Copy the relative path configuration file to the path written by the main configuration file
[root@node1 ~]# cp /etc/auto.misc /etc/auto.rhome

4. Edit the relative path configuration file
[root@node1 ~]# vim /etc/auto.rhome
remoteuser1 -rw materials.example.com:/rhome/remoteuser1

5. restart service
[root@node1 ~]# systemctl restart autofs.service

check status
[root@node1 ~]# systemctl status autofs.service
Active: active (running)

Set up autostart
[root@node1 ~]# systemctl enable autofs.service
Created symlink /etc/systemd/system/multi-user.target.wants/autofs.service â†’ /usr/lib/systemd/system/autofs.service.

6. Login test
[root@node1 ~]# ssh remoteuser1@localhost
[remoteuser1@clear ~]$ pwd
/rhome/remoteuser1
Check write permissions
[remoteuser1@node1 ~]$ touch 1.txt
[remoteuser1@node1 ~]$ ll
total 0
-rw-rw-r--. 1 devops devops 0 May 27 12:04 1.txt
