Question:18 Create VDO volume (service)
Create VDO volumes

Create a new VDO volume with the following requirements:

use unpartitioned disk

The name of the volume is vdough

The logical size of the volume is 50G

The volume is formatted with the xfs file system

The volume is mounted (at system boot) under /vbread

1. Search for the installation package
[root@node2 ~]# yum search vdo
vdo.x86_64
kmod-kvdo.x86_64

2. Check the installation
[root@node2 ~]# rpm -q vdo kmod
package vdo is not installed
kmod-25-16.el8.x86_64

3. Install
[root@node2 ~]# yum install -y vdo.x86_64 kmod-kvdo.x86_64
Installed:
   kmod-kvdo-6.2.2.117-65.el8.x86_64
   vdo-6.2.2.117-13.el8.x86_64

Complete!

4.man vdo view format
[root@node2 ~]# vdo create --name=vdough --device=/dev/vdc --vdoLogicalSize=50G

5. Formatting
# -K quick format (uppercase)

[root@node2 ~]# mkfs.xfs -K /dev/mapper/vdough

6. Create a mount point
[root@node2 ~]# mkdir /vbread

7. Find the UUID
[root@node2 ~]# blkid
or
[root@node2 ~]# blkid /dev/mapper/vdough
/dev/mapper/vdough: UUID="a1f68c65-cf38-4cc8-b508-860a2e90397c" TYPE="xfs"

8. Make a permanent mount, and then mount it through the network
[root@node2 ~]# vim /etc/fstab
UUID="a1f68c65-cf38-4cc8-b508-860a2e90397c" /vbread xfs _netdev 0 0

9. load
[root@node2 ~]# mount -a # Load all devices set in the file /etc/fstab

10.
[root@node2 ~]# df -h
/dev/mapper/vdough 50G 390M 50G 1% /vbread

11. vdo is a service that needs to be set to start automatically at boot
[root@node2 ~]# systemctl restart vdo
[root@node2 ~]# systemctl enable vdo
[root@node2 ~]# systemctl status vdo
